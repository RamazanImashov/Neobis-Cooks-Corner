# Документация для проекта "Event Booking Platform"

## 1. Общая информация о проекте

**Название проекта:** Event Booking Platform

**Цель проекта:**
Создание платформы для организации и бронирования мероприятий, таких как мастер-классы, концерты, и лекции. Пользователи могут регистрироваться, создавать события, просматривать доступные мероприятия и бронировать билеты.

**Описание функциональности:**
Проект предоставляет возможности для пользователей и организаторов, включая:
- Регистрацию и аутентификацию пользователей с подтверждением через email.
- Просмотр и фильтрацию мероприятий по категориям, дате, и сложности.
- Создание, редактирование и управление мероприятиями для организаторов.
- Систему бронирования билетов для зарегистрированных пользователей.
- Управление профилем и системой уведомлений о бронированиях.

---

## 2. Архитектура проекта

Проект разделен на несколько микросервисов и приложений, которые взаимодействуют друг с другом для обеспечения необходимой функциональности.

### 2.1. Микросервис пользователей (`accounts`)
- **Фреймворк:** Django Rest Framework (DRF)
- **Функциональность:**
  - Регистрация и подтверждение учетной записи.
  - Авторизация через JWT токены.
  - Управление профилем пользователя и настройками (например, смена пароля).
  - Отправка уведомлений по email (через Celery).
  - Хранение данных в PostgreSQL.

### 2.2. Микросервис событий (`apps/recipe`)
- **Фреймворк:** Django Rest Framework (DRF)
- **Функциональность:**
  - Создание и управление событиями.
  - Отображение событий с фильтрацией по категории и сложности.
  - Поддержка управления медиа-файлами, изображениями и ингредиентами событий.
  - Хранение данных в PostgreSQL.

### 2.3. Микросервис отзывов и избранного (`apps/review`)
- **Фреймворк:** Django Rest Framework (DRF)
- **Функциональность:**
  - Создание и управление отзывами, лайками и избранным для каждого события.
  - Отображение отзывов для каждого мероприятия.
  - Хранение данных в PostgreSQL.

### 2.4. Микросервис профилей пользователей (`apps/user_profile`)
- **Функциональность:**
  - Создание и управление профилями пользователей.
  - Ведение подписок на других пользователей и учет количества подписчиков.
  - Хранение данных в PostgreSQL.

---

## 3. Используемые технологии и стек

- **Бэкенд:**
  - Django Rest Framework для реализации сервисов.
  - Celery для асинхронной отправки email-сообщений.
  - JWT для аутентификации.

- **База данных:**
  - PostgreSQL для всех микросервисов.

- **Фронтенд:** (если имеется)
  - React или аналогичный фреймворк для отображения данных.

---

## 4. Основные пользовательские сценарии и API

### 4.1. Пользовательские сценарии

1. **Регистрация:** Пользователь может зарегистрироваться через email с последующим подтверждением.
2. **Подтверждение учетной записи:** Код подтверждения отправляется на email пользователя.
3. **Авторизация:** Пользователь входит в систему с использованием JWT токена.
4. **Создание события:** Организатор создает новое событие с указанием деталей.
5. **Просмотр и бронирование событий:** Пользователь просматривает список событий и может забронировать билет.
6. **Управление профилем:** Пользователь управляет своим профилем, включая обновление подписок и просмотр уведомлений.

### 4.2. API методы

#### API для пользователей (`accounts`)
- `POST /register/`: Регистрация пользователя.
- `POST /activate/`: Активация учетной записи.
- `POST /login/`: Авторизация и выдача JWT токена.
- `POST /change_password/`: Смена пароля.
- `POST /forgot_password/`: Сброс пароля.

#### API для событий (`apps/recipe`)
- `POST /recipe/`: Создание нового события.
- `GET /recipe/`: Получение списка событий с фильтрацией.
- `PUT /recipe/<id>/`: Редактирование события.
- `DELETE /recipe/<id>/`: Удаление события.

#### API для отзывов и избранного (`apps/review`)
- `POST /review/`: Создание отзыва.
- `POST /favorites/`: Добавление события в избранное.
- `DELETE /favorites/<id>/`: Удаление события из избранного.
- `POST /like/`: Лайк события.

#### API для профилей (`apps/user_profile`)
- `GET /profile/`: Получение профиля пользователя.
- `POST /profile/<id>/subscribe/`: Подписка на пользователя.
- `DELETE /profile/<id>/unsubscribe/`: Отписка от пользователя.

---

## 5. Аутентификация и авторизация

- **Тип аутентификации:** JWT токены.
- **Подтверждение личности:** через код, отправляемый по email.
- **Роли пользователей:** Обычные пользователи, организаторы, администраторы. Роли определяют уровень доступа и функциональность.

---

## 6. Логирование и мониторинг

- **Логирование:** 
  - Логирование действий пользователей и событий ошибок в сервисах.
  - Все логи записываются в консоль и могут быть настроены для хранения в внешней системе мониторинга.

---

## 7. Развертывание и переменные окружения

### Docker и Docker Compose

Проект разворачивается с использованием Docker и Docker Compose, где каждый сервис имеет свою конфигурацию и базу данных. Переменные окружения задаются в `.env` файле для настройки базы данных, JWT и почтовых серверов.

### Пример файла переменных окружения
```env
SECRET_KEY=your-secret-key
DEBUG=True
DB_NAME=event_platform_db
DB_USER=your-database-user
DB_PASSWORD=your-database-password
DB_HOST=db-host
EMAIL_HOST=smtp.example.com
EMAIL_HOST_USER=your-email@example.com
EMAIL_HOST_PASSWORD=your-email-password
```

---

## 8. Структура проекта

```plaintext
.
├── Dockerfile
├── Makefile
├── README.md
├── accounts
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations
│   │   ├── 0001_initial.py
│   │   ├── __init__.py
│   ├── models.py
│   ├── permissions.py
│   ├── serializers.py
│   ├── services.py
│   ├── tasks.py
│   ├── templates
│   │   ├── activate.html
│   │   ├── email_url.html
│   │   ├── lose_password.html
│   ├── tests.py
│   ├── urls.py
│   ├── validators.py
│   └── views.py
├── apps
│   ├── recipe
│   ├── review
│   └── user_profile
├── config
│   ├── __init__.py
│   ├── asgi.py
│   ├── celery.py
│   ├── setting
│   │   ├── base.py
│   │   └── decompose
│   ├── urls.py
│   └── wsgi.py
├── docker-compose.yml
├── manage.py
├── nginx
│   ├── no_ssl
│   │   └── nginx.conf
│   └── ssl
│       └── nginx.conf
├── req.txt
└── reqi.txt
```

---

### 9. Дополнительные сведения

1. **Будущие улучшения:** 
   - Добавление функциональности для пуш-уведомлений.
   - Улучшение системы поиска и фильтрации событий.
   - Интеграция с внешними системами оплаты.

2. **Производительность и масштабирование:**
   - Все сервисы могут быть настроены для горизонтального масштабирования.
   - Redis и Celery используются для улучшения производительности при работе с уведомлениями.

---

### Заключение

Проект "Event Booking Platform" разработан с учетом модульности и масштабируемости, что позволяет легко добавлять новые функции и масштабировать его для обслуживания большого количества пользователей.
